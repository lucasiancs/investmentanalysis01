code = input('Insert here the investment you want to analyse:')
print('You chose:',code.upper())

day1 = int(input('Chose a day to start:'))
month1 = int(input('Chose a month to start:'))
year1 = int(input('Chose a year to start:'))

day2 = int(input('Chose a day to end:'))
month2 = int(input('Chose a month to end:'))
year2 = int(input('Chose a year to end:'))

start = datetime.datetime(year1,month1,day1)
end = datetime.datetime(year2,month2,day2)

investment = web.DataReader('{}'.format(code.upper()),'yahoo',start,end)

investment['Returns'] = ((investment['Adj Close']/investment['Adj Close'].shift(1)) - 1)
investment['6-Month-SMA Returns'] = investment['Returns'].rolling(window=6).mean()
investment['12-Month-SMA Returns'] = investment['Returns'].rolling(window=12).mean()
investment['EWMA12-Returns'] = investment['Returns'].ewm(span=12).mean()
investment['Cumulative Returns'] = investment['Adj Close']/investment.loc[start]['Adj Close']

investment['Weekly Volatility'] = investment['Returns'].rolling(7).std()
investment['6-Month-Volatility'] = investment['Returns'].rolling(window=6).std()
investment['12-Month-Volatility'] = investment['Returns'].rolling(window=12).std()
      
invreturns = pd.concat([investment['Returns'],investment['6-Month-SMA Returns'],investment['12-Month-SMA Returns'],investment['EWMA12-Returns']],axis=1)
invreturns.columns = ['Returns','6-Month-SMA Returns','12-Month-SMA Returns','EWMA12-Returns','Cumulative Returns']
involatility = pd.concat([investment['Weekly Volatility'],investment['6-Month-Volatility'],investment['12-Month-Volatility']],axis=1)
involatility.columns = ['Weekly Volatility','6-Month-Volatility','12-Month-Volatility']

invreturns.plot(figsize=(12,4),title='Compared Returns')

involatility.plot(figsize=(12,4),title='Compared Volatility')

moneyi = int(input('How much money, in $, you want to invest?'))
moneyf = (investment.loc[end]['Adj Close']/investment.loc[start]['Adj Close']) * moneyi
fresult = moneyf - moneyi

if fresult > 0:
    print('You gained',fresult,'dollars with this investment!')
elif fresult < 0:
    print('You lost',fresult,'dollars with this investment!')
